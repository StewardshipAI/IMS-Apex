# FRAMEWORK_STRUCTURE.md | IMS-Apex Directory Map

**Version**: 1.0.0  
**Purpose**: Canonical directory structure for the Apex reasoning engine  
**AI-Readable**: This file defines where agents read/write context

---

## ğŸ“‚ Root Structure

```
IMS-Apex/
â”œâ”€â”€ README.md                 # Human-facing project overview
â”œâ”€â”€ AGENTS.md                 # AI-facing behavioral manifest (The "Playbook")
â”œâ”€â”€ AUDIT_PROTOCOL.md         # The "Judge's" rules for quality assurance
â”œâ”€â”€ RESEARCH_MANIFEST.md      # Logic for deep-research triggers
â”œâ”€â”€ FRAMEWORK_STRUCTURE.md    # This file - directory organization
â”œâ”€â”€ LICENSE.md                # Apache 2.0 (Open source AI framework)
â”œâ”€â”€ config.yaml               # Integration settings (Apex â†” Core)
â”‚
â”œâ”€â”€ .agent/                   # Centralized AI context directory
â”‚   â”œâ”€â”€ spec/
â”‚   â”‚   â”œâ”€â”€ requirement.md    # Business rules & "Top 2%" goals
â”‚   â”‚   â””â”€â”€ design.md         # Technical architecture & API definitions
â”‚   â”œâ”€â”€ tasks.md              # Recursive task list (Parent-Child tracking)
â”‚   â”œâ”€â”€ output/               # Generated artifacts (specs, code, diagrams)
â”‚   â””â”€â”€ sync.log              # Integration sync history
â”‚
â”œâ”€â”€ docs/                     # Product & technical documentation
â”‚   â”œâ”€â”€ specs/                # Generated technical specifications
â”‚   â””â”€â”€ core-specs/           # Symlink to ../ims-core/docs/ims/
â”‚
â”œâ”€â”€ scripts/                  # Automation & initialization
â”‚   â”œâ”€â”€ init_framework.sh     # One-click environment setup
â”‚   â””â”€â”€ integrate-core.sh     # Sync specs to IMS-Core
â”‚
â””â”€â”€ [project_folders]/        # Specialized task directories
    â”œâ”€â”€ api/                  # API implementation tasks
    â”œâ”€â”€ ui/                   # Frontend tasks
    â””â”€â”€ instruction.md        # Narrow task instructions for child agents
```

---

## ğŸ§  AI Agent Reading Order

When a new task is assigned, agents read in this order:

1. **AGENTS.md** â†’ Behavioral rules and persona
2. **config.yaml** â†’ Project integration settings
3. **.agent/spec/requirement.md** â†’ Business goals
4. **.agent/spec/design.md** â†’ Technical architecture
5. **.agent/tasks.md** â†’ Current task hierarchy
6. **RESEARCH_MANIFEST.md** â†’ If research needed
7. **AUDIT_PROTOCOL.md** â†’ Before any commit

---

## ğŸ“ File Purposes

### Root Level
| File | Purpose | Reader |
|------|---------|--------|
| `README.md` | Public documentation | Human |
| `AGENTS.md` | Operating rules | AI Agent |
| `AUDIT_PROTOCOL.md` | Quality gates | AI Judge |
| `RESEARCH_MANIFEST.md` | Research triggers | AI Researcher |
| `config.yaml` | Integration config | Scripts |

### .agent/ (AI Context)
| File | Purpose | Writer |
|------|---------|--------|
| `spec/requirement.md` | User intent | Human/AI |
| `spec/design.md` | Architecture | AI Architect |
| `tasks.md` | Task breakdown | AI Planner |
| `output/*.md` | Generated specs | AI Agent |
| `sync.log` | Sync history | Scripts |

### docs/ (Documentation)
| Directory | Purpose | Content |
|-----------|---------|---------|
| `specs/` | Technical specs | Generated by Apex |
| `core-specs/` | IMS-Core docs | Symlink to Core repo |

---

## ğŸ”’ Directory Isolation Rules

### AI Agents MUST:
- âœ… Read from `.agent/spec/` before starting work
- âœ… Write outputs to `.agent/output/` or designated task folder
- âœ… Update `.agent/tasks.md` on completion
- âœ… Reference `config.yaml` for integration paths

### AI Agents MUST NOT:
- âŒ Write to root level (except via scripts)
- âŒ Modify `AGENTS.md` or `AUDIT_PROTOCOL.md`
- âŒ Delete existing specs without human approval
- âŒ Commit code without passing audit gate

---

## ğŸ”— Integration Points

### Apex â†’ Core
```bash
# Generated specs go to:
../ims-core/docs/ims/SPEC-EPIC-X.Y.md

# Task tracking syncs to:
../ims-core/.github/issues/
```

### Core â†’ Apex
```bash
# Core docs readable from:
./docs/core-specs/ (symlink)

# Epic requirements read from:
../ims-core/docs/ims/IMS-EPIC-*.md
```

---

## ğŸ“Š Task Folder Pattern

For specialized tasks (e.g., Epic 1.4 PCR):

```
IMS-Apex/pcr-task/
â”œâ”€â”€ instruction.md           # Narrow task brief
â”œâ”€â”€ src/                     # Draft code
â”œâ”€â”€ tests/                   # Draft tests
â””â”€â”€ output/
    â””â”€â”€ SPEC-PCR-FINAL.md    # Final spec to commit
```

**Rules:**
- Task folders are temporary workspaces
- Final outputs move to `.agent/output/`
- Code drafts reviewed before Core integration

---

## ğŸš€ Initialization

### First-Time Setup
```bash
# Create structure
./scripts/init_framework.sh

# Link to Core
ln -s ../ims-core/docs/ims ./docs/core-specs

# Verify
tree -L 2 -a
```

### Verify Structure
```bash
# Should exist:
ls .agent/spec/requirement.md
ls .agent/spec/design.md
ls .agent/tasks.md
ls docs/core-specs  # symlink

# Should be writable:
touch .agent/output/test.md && rm .agent/output/test.md
```

---

## ğŸ“– Version History

| Version | Date | Changes |
|---------|------|---------|
| 1.0.0 | Dec 25, 2025 | Initial structure definition |

---

**For AI Agents**: This structure is mandatory. Deviations trigger audit failure.  
**For Humans**: This structure optimizes AI context management for the Apex framework.